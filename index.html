<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PHP Guestbook</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="guestbook-container">
    <h1>Guestbook</h1>
    <?php if ($error): ?>
        <div class="error"><?= h($error) ?></div>
    <?php endif; ?>
    <form method="post" class="guestbook-form">
        <input type="text" name="name" placeholder="Your name" maxlength="50" required>
        <textarea name="message" placeholder="Your message" maxlength="500" required></textarea>
        <button type="submit">Sign Guestbook</button>
    </form>
    <div class="messages">
        <h2>Messages</h2>
        <?php if (!$messages): ?>
            <p>No messages yet.</p>
        <?php else: ?>
            <?php foreach ($messages as $entry): ?>
                <div class="message">
                    <div class="meta">
                        <?= h($entry['name']) ?> 
                        <span class="date"><?= date('Y-m-d H:i', $entry['time']) ?></span>
                    </div>
                    <div class="text"><?= nl2br(h($entry['message'])) ?></div>
                </div>
            <?php endforeach; ?>
        <?php endif; ?>
    </div>
</div>
</body>
</html>
